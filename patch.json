{
    "rationale": "The original code was vulnerable to SQL injection because it used an f-string to format a raw SQL query with user-provided data. The fix replaces the raw SQL query with the SQLAlchemy ORM to create a new Todo object. This uses parameterized queries, which properly escapes user input and prevents SQL injection attacks. This change also makes the code consistent with the rest of the application, which already uses the ORM for database operations.",
    "patch": "--- a/app.py\n+++ b/app.py\n@@ -21,9 +21,8 @@\n def add():\n title = request.form.get(\"title\")\n if title:\n- sql = f\"INSERT INTO todo (title, complete) VALUES ('{title}', 0)\"\n- db.session.execute(sql)\n+ new_todo = Todo(title=title, complete=False)\n+ db.session.add(new_todo)\n db.session.commit()\n return redirect(url_for(\"index\"))\n \n"
}