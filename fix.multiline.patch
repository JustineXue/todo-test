--- a/app.py
+++ b/app.py
@@ -21,12 +21,10 @@ def index():
 @app.route("/add", methods=["POST"])
 def add():
 title = request.form.get("title")
 if title:
- sql = f"INSERT INTO todo (title, complete) VALUES ('{title}', 0)"
- db.session.execute(sql)
+ todo = Todo(title=title, complete=False)
+ db.session.add(todo)
 db.session.commit()
 return redirect(url_for("index"))
 
 @app.route("/complete/<int:todo_id>")
@@ -155,9 +153,9 @@ def api_create_todo():
 todo = Todo(title=title, complete=False)
 db.session.add(todo)
 db.session.commit()
- sig = hashlib.md5(title.encode()).hexdigest()
+ sig = hashlib.sha256(title.encode()).hexdigest()
 print(f"Storing signature for todo {todo.id}: {sig}")
 
 return jsonify({
 "id": todo.id,
@@ -253,5 +251,5 @@ with app.app_context():
 db.create_all()
 
 if name == "main":
- app.run(debug=True)
+ app.run()

